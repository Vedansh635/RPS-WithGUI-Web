<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ü™®, üìÉ, ‚úÇÔ∏è</title>
  <style>
    html {
      background-image: linear-gradient(135deg, #6dd5ed, #2193b0);
      height: 100%;
    }

    body {
      min-height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-family: "Arial", sans-serif;
      color: #fff;
      text-align: center;
    }
    .heading {
      min-height: 4rem;
    }
    h1 {
      font-size: 3rem;
      font-weight: bold;
      text-shadow: 2px 2px 4px #000;
      margin-bottom: 1rem;
    }

    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
      width: 90%;
      max-width: 500px;
      padding: 1rem;
      background: rgba(0, 0, 0, 0.6);
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    .buttons {
      display: flex;
      gap: 1rem;
    }

    .con-button {
      font-size: 4rem;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4);
      border: none;
      border-radius: 50%;
      padding: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      cursor: pointer;
    }

    .con-button:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }

    .inform {
      font-size: 1.2rem;
      margin-top: 1rem;
    }

    .result {
      display: flex;
      justify-content: space-between;
      font-size: 1.2rem;
      background: rgba(255, 255, 255, 0.1);
      padding: 0.5rem 1rem;
      border-radius: 10px;
      width: 100%;
      max-width: 400px;
    }

    .buttonsys {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }

    .reset,
    .autoplay {
      padding: 0.8rem 1.5rem;
      font-size: 1rem;
      font-weight: bold;
      border-radius: 50px;
      border: none;
      background: linear-gradient(135deg, #43cea2, #185a9d);
      color: white;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease;
    }

    .reset:hover,
    .autoplay:hover {
      background: linear-gradient(135deg, #185a9d, #43cea2);
      transform: scale(1.1);
    }

    .reset:active,
    .autoplay:active {
      transform: scale(0.9);
    }

    .confirm {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 1rem;
      border-radius: 10px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: none;
      z-index: 10;
    }

    .confirm button {
      background: #e74c3c;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      margin: 0.5rem;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .confirm button:hover {
      background: #c0392b;
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      z-index: 5;
    }

    @media screen and (max-width: 500px) {
      h1 {
        font-size: 2rem;
      }

      .con-button {
        font-size: 3rem;
      }

      .result {
        font-size: 1rem;
      }

      .reset,
      .autoplay {
        font-size: 0.9rem;
        padding: 0.5rem 1rem;
      }
    }
    @media screen and (max-width: 715px) {
      .heading {
        min-height: 7.5rem;
      }
      @media screen and (max-width: 500px) {
        .heading {
          min-height: 5rem;
        }
      }
    }
    .rock-is-toogle {
      transform: scale(1.1);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }

    .paper-is-toogle {
      transform: scale(1.1);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }

    .scissors-is-toogle {
      transform: scale(1.1);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }
  </style>
</head>

<body>
  <h1 class="heading"></h1>
  <div class="container">
    <div class="buttons">
      <button class="con-button js-rock-button" onclick="playerMove('ü™®'); autoplay = true; autoPlay();">
        ü™®
      </button>
      <button class="con-button js-paper-button" onclick="playerMove('üìÉ'); autoplay = true; autoPlay();">
        üìÉ
      </button>
      <button class="con-button js-scissors-button" onclick="playerMove('‚úÇÔ∏è'); autoplay = true; autoPlay();">
        ‚úÇÔ∏è
      </button>
    </div>

    <p class="inform">Make your move!</p>

    <div class="result">
      <span class="results">Wins: 0</span>
      <span class="results">Losses: 0</span>
      <span class="results">Ties: 0</span>
    </div>

    <div class="buttonsys">
      <button class="reset">Reset Score</button>
      <button class="autoplay" onclick="autoPlay();">Auto Play</button>
    </div>

    <div class="overlay"></div>
    <div class="confirm">
      <span>Are you sure you want to reset the score?</span>
      <button class="yes-btn">Yes</button>
      <button class="no-btn">No</button>
    </div>
  </div>

  <script>
    // all the buttons 
    const heading = document.querySelector(".heading");
    const rockbtn = document.querySelector(".js-rock-button");
    const paperbtn = document.querySelector(".js-paper-button");
    const scissorbtn = document.querySelector(".js-scissors-button");
    const resetButton = document.querySelector(".reset");
    const overlay = document.querySelector(".overlay");
    const confirmBox = document.querySelector(".confirm");
    const yesButton = document.querySelector(".yes-btn");
    const noButton = document.querySelector(".no-btn");
    const autoplayButton = document.querySelector(".autoplay");
    const inform = document.querySelector(".inform");
    // all the variables
    let score = JSON.parse(localStorage.getItem("score")) || {
      wins: 0,
      losses: 0,
      ties: 0,
    };
    // autoplay
    if (localStorage.getItem("autoplay") == "true") {
      autoplay = true;
    } else {
      autoplay = false;
    }
    let autoplayIntervalId;
    // this variable(resetting) to check if page before just reloading is in resetting state or not 
    let resetting = localStorage.getItem("resetting") || "false";
    /* this variable is for track if the page is reloaded or not , if it is true then the autoPlay() will not suddenly auto play 
  it wait for 4 seconds again before playing next move automatically*/
    let reload = false;
    // all the Animations 
    function informAnimation(starting, gap) {


      setTimeout(() => {
        inform.innerHTML = "M|";
        disaAllButnEvents();
      }, starting += gap);
      setTimeout(() => {
        inform.innerHTML = "Ma|";
      }, starting += gap);
      setTimeout(() => {
        inform.innerHTML = "Mak|";
      }, starting += gap);
      setTimeout(() => {
        inform.innerHTML = "Make|";
      }, starting += gap);
      setTimeout(() => {
        inform.innerHTML = "Make |";
      }, starting += gap);
      setTimeout(() => {
        inform.innerHTML = "Make y|";
      }, starting += gap);
      setTimeout(() => {
        inform.innerHTML = "Make yo|";
      }, starting += gap);
      setTimeout(() => {
        inform.innerHTML = "Make you|";
      }, starting += gap);
      setTimeout(() => {
        inform.innerHTML = "Make your|";
      }, starting += gap);
      setTimeout(() => {
        inform.innerHTML = "Make your |";
      }, starting += gap);
      setTimeout(() => {
        inform.innerHTML = "Make your m|";
      }, starting += gap);
      setTimeout(() => {
        inform.innerHTML = "Make your mo|";
      }, starting += gap);
      setTimeout(() => {
        inform.innerHTML = "Make your mov|";
      }, starting += gap);
      setTimeout(() => {
        inform.innerHTML = "Make your move|";
      }, starting += gap);
      setTimeout(() => {
        inform.innerHTML = "Make your move |";
      }, starting += gap);
      setTimeout(() => {
        inform.innerHTML = "Make your move !";
        localStorage.setItem(
          "inform",
          document.querySelector(".inform").innerHTML
        );
        enaAllButnEvents();
      }, starting += gap);
    }

    function comingAniamtion(playermove, emoji, delay) {
      setTimeout(() => {
        document.querySelector(
          ".inform"
        ).innerHTML = `You picked ${playermove}. Computer picked ${emoji}.`;
      }, delay);

    }
    function resetAnimation(starting, gap) {
      if (score.wins > 0 || score.losses > 0 || score.ties > 0) {
        setTimeout(() => {
          if (score.wins > 0 && score.losses > 0 && score.ties > 0) {
            score.wins -= 1;
            score.losses -= 1;
            score.ties -= 1;
            resetting = "true";
            localStorage.setItem("resetting", resetting);
          } else if (score.wins > 0 && score.losses > 0) {
            score.wins -= 1;
            score.losses -= 1;
            resetting = "true";
            localStorage.setItem("resetting", resetting);
          } else if (score.ties > 0 && score.losses > 0) {
            score.losses -= 1;
            score.ties -= 1;
            resetting = "true";
            localStorage.setItem("resetting", resetting);
          }
          else if (score.wins > 0 && score.ties > 0) {
            score.wins -= 1;
            score.ties -= 1;
            resetting = "true";
            localStorage.setItem("resetting", resetting);
          }
          else if (score.losses > 0) {
            score.losses -= 1;
            resetting = "true";
            localStorage.setItem("resetting", resetting);
          }
          else if (score.ties > 0) {
            score.ties -= 1;
            resetting = "true";
            localStorage.setItem("resetting", resetting);
          }
          else if (score.wins > 0) {
            score.wins -= 1;
            resetting = "true";
            localStorage.setItem("resetting", resetting);
          }

          document.querySelector(
            ".result"
          ).innerHTML = `<span class="results">Wins: ${score.wins}</span> | <span class="results">Losses: ${score.losses}</span> | <span class="results">Ties: ${score.ties}</span>`;
          localStorage.setItem("score", JSON.stringify(score));
          resetAnimation(starting + gap, gap); // Call the function again
        }, starting);
      }
      else {
        enaAllButnEvents();
        resetting = "false";
        localStorage.setItem("resetting", resetting);
      }
    }
    function headingAnimation(starting, gap) {
      // let starting = starting;
      // let gap = gap;
      setTimeout(() => {
        heading.innerText = '|'
      }, starting);
      setTimeout(() => {
        heading.innerText = 'L|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Le|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s |'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s P|'
      }, starting += gap);;
      setTimeout(() => {
        heading.innerText = 'Let\'s Pl|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Pla|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play |'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play R|'
      }, starting += gap);;
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Ro|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Roc|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Rock|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Rock |'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Rock P|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Rock Pa|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Rock Pap|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Rock Pape|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Rock Paper|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Rock Paper |'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Rock Paper S|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Rock Paper Sc|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Rock Paper Sci|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Rock Paper Scis|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Rock Paper Sciss|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Rock Paper Scisso|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Rock Paper Scissor|'
      }, starting += gap);
      setTimeout(() => {
        heading.innerText = 'Let\'s Play Rock Paper Scissors'
      }, starting += gap);
      // setTimeout(() => {
      //   heading.innerText = 'Let\'s Play Rock Paper Scissors'
      // }, starting+=gap);
    }
    // ComputerMove logic function 
    function ComputerChoice() {
      const randomNum = Math.random();
      if (randomNum >= 0 && randomNum < 1 / 3) {
        computerMove = "ü™®";
      } else if (randomNum >= 1 / 3 && randomNum < 2 / 3) {
        computerMove = "üìÉ";
      } else {
        computerMove = "‚úÇÔ∏è";
      }
      return computerMove;
    }
    // function of disabling all the buttons / event listeners 
    function disaAllButnEvents() {
      document.body.removeEventListener("keydown", backSpaceEnter);
      document.body.removeEventListener("keydown", playWithkeys);
      yesButton.setAttribute("disabled", true);
      rockbtn.setAttribute("disabled", true);
      paperbtn.setAttribute("disabled", true);
      scissorbtn.setAttribute("disabled", true);
      resetButton.setAttribute("disabled", true);
      autoplayButton.setAttribute("disabled", true);
      resetButton.setAttribute("disabled", true);
      document.body.removeEventListener("keydown", backSpaceEnter);
      document.body.removeEventListener("keydown", playWithkeys);
      yesButton.setAttribute("disabled", true);
    }
    // function for enabling all the buttons / event listeners again 
    function enaAllButnEvents() {
      yesButton.removeAttribute("disabled");
      document.body.addEventListener("keydown", playWithkeys);
      document.body.addEventListener("keydown", backSpaceEnter);
      rockbtn.removeAttribute("disabled");
      paperbtn.removeAttribute("disabled");
      scissorbtn.removeAttribute("disabled");
      resetButton.removeAttribute("disabled");
      autoplayButton.removeAttribute("disabled");
    }
    // Playermove logic function
    function playerMove(playermove) {
      disaAllButnEvents();


      overlay.style.display = "none";
      // hovering styling reset
      rockbtn.classList.remove("rock-is-toogle", "toggled");
      paperbtn.classList.remove("paper-is-toogle", "toggled");
      scissorbtn.classList.remove("scissors-is-toogle", "toggled");
      const computerMove = ComputerChoice();
      let result = "";
      if (playermove == "ü™®") {
        if (computerMove === "ü™®") {
          result = "Tie";
        } else if (computerMove === "üìÉ") {
          result = "You Loss";
        } else {
          result = "You Win";
        }

        rockbtn.classList.add("rock-is-toogle");
        paperbtn.classList.remove("paper-is-toogle");
        scissorbtn.classList.remove("scissors-is-toogle");
      } else if (playermove == "üìÉ") {
        if (computerMove === "ü™®") {
          result = "You Win";
        } else if (computerMove === "üìÉ") {
          result = "Tie";
        } else {
          result = "You Loss";
        }
        paperbtn.classList.add("paper-is-toogle");
        rockbtn.classList.remove("rock-is-toogle");
        scissorbtn.classList.remove("scissors-is-toogle");
      } else if (playermove == "‚úÇÔ∏è") {
        if (computerMove === "ü™®") {
          result = "You Loss";
        } else if (computerMove === "üìÉ") {
          result = "You Win";
        } else {
          result = "Tie";
        }
        scissorbtn.classList.add("scissors-is-toogle");
        paperbtn.classList.remove("paper-is-toogle");
        rockbtn.classList.remove("rock-is-toogle");
      }

      if (result === "You Win") {
        score.wins += 1;
      } else if (result === "You Loss") {
        score.losses += 1;
      } else {
        score.ties += 1;
      }
      localStorage.setItem("score", JSON.stringify(score));

      // animation
      comingAniamtion(playermove, 'ü™®', 200);
      comingAniamtion(playermove, 'üìÉ', 300);
      comingAniamtion(playermove, '‚úÇÔ∏è', 400);
      comingAniamtion(playermove, 'ü™®', 500);
      comingAniamtion(playermove, 'üìÉ', 600);
      comingAniamtion(playermove, '‚úÇÔ∏è', 800);
      comingAniamtion(playermove, 'ü™®', 1000);
      comingAniamtion(playermove, 'üìÉ', 1200);
      comingAniamtion(playermove, '‚úÇÔ∏è', 1500);
      comingAniamtion(playermove, 'ü™®', 2000);
      comingAniamtion(playermove, 'üìÉ', 2700);
      comingAniamtion(playermove, computerMove, 3000);
      setTimeout(() => {
        document.querySelector(
          ".inform"
        ).innerHTML = `You picked ${playermove}. Computer picked ${computerMove}. ${result}`;

        document.querySelector(
          ".result"
        ).innerHTML = `<span class="results">Wins: ${score.wins}</span> | <span class="results">Losses: ${score.losses}</span> | <span class="results">Ties: ${score.ties}</span>`;
        localStorage.setItem(
          "inform",
          document.querySelector(".inform").innerHTML
        );
        enaAllButnEvents();
      }, 3850);


      document.activeElement.blur();
    }

    function autoPlay() {
      if (!autoplay) {
        if (!reload) {
          const playermove = ComputerChoice();
          playerMove(playermove);
          document.querySelector(".autoplay").innerHTML = "Stop Auto Play";
        }

        autoplayIntervalId = setInterval(() => {
          const playermove = ComputerChoice();
          playerMove(playermove);
        }, 5000);
        document.querySelector(".autoplay").innerHTML = "Stop Auto Play";
        autoplay = true;
        localStorage.setItem("autoplay", autoplay);
        reload = false;
      } else {
        clearInterval(autoplayIntervalId);
        autoplay = false;
        localStorage.setItem("autoplay", autoplay);
        document.querySelector(".autoplay").innerHTML = "Auto Play";
      }
    }
    // Reset functionality


    resetButton.addEventListener("click", () => {
      overlay.style.display = "block";
      confirmBox.style.display = "flex";
      document.body.addEventListener("keydown", backSpaceEnter);
      document.body.addEventListener("keydown", backspaceEscape);
      autoplay = true;
      autoPlay();

    });

    // Yes button inside confirm box
    yesButton.addEventListener("click", () => {

      scissorbtn.classList.remove("scissors-is-toogle");
      rockbtn.classList.remove("rock-is-toogle");
      paperbtn.classList.remove("paper-is-toogle");

      resetAnimation(0, 2);
      informAnimation(25, 55);
      overlay.style.display = "none";
      confirmBox.style.display = "none";
      autoplay = true;
      autoPlay();
    });
    // No button inside confirm box
    noButton.addEventListener("click", () => {
      overlay.style.display = "none";
      confirmBox.style.display = "none";
    });

    // system of , resetting score with backspace+enter
    function backSpaceEnter(ev) {

      if (ev.key === "Enter") {
        scissorbtn.classList.remove("scissors-is-toogle");
      rockbtn.classList.remove("rock-is-toogle");
      paperbtn.classList.remove("paper-is-toogle");

      resetAnimation(0, 2);
      informAnimation(25, 55);
      overlay.style.display = "none";
      confirmBox.style.display = "none";
      autoplay = true;
      autoPlay();
      document.body.removeEventListener("keydown", backSpaceEnter);
      }
  }
    function backspaceEscape(ev) {
      if (ev.key === "Escape") {
        overlay.style.display = "none";
        confirmBox.style.display = "none";
        document.body.removeEventListener("keydown", backspaceEscape);
      }
    }

    // Play with keys
    function playWithkeys(event) {
      if (event.key === "r") {
        playerMove("ü™®");
        rockbtn.classList.add("rock-is-toogle");
        paperbtn.classList.remove("paper-is-toogle");
        scissorbtn.classList.remove("scissors-is-toogle");
        autoplay = true;
        autoPlay();
      } else if (event.key === "p") {
        playerMove("üìÉ");
        paperbtn.classList.add("paper-is-toogle");
        rockbtn.classList.remove("rock-is-toogle");
        scissorbtn.classList.remove("scissors-is-toogle");
        autoplay = true;
        autoPlay();
      } else if (event.key === "s") {
        playerMove("‚úÇÔ∏è");
        autoplay = true;
        autoPlay();
      } else if (event.key === "a") {
        autoPlay();
        // reset functionality
      } else if (event.key === "Backspace") {
        overlay.style.display = "block";
        confirmBox.style.display = "flex";
        overlay.style.display = "block";
        confirmBox.style.display = "flex";
        document.body.addEventListener("keydown", backSpaceEnter);
        autoplay = true;
        autoPlay();
      }
    }
    function forEscape(event) {
      if (event.key === "Backspace") {
        document.body.addEventListener("keydown", backspaceEscape);
      }
    }
    document.body.addEventListener("keydown", forEscape);
    // document.body.addEventListener("keydown", backSpaceEnter);
    document.body.addEventListener("keydown", playWithkeys);


    // on loading the page 
    window.addEventListener("load", () => {
      document.querySelector(
        ".result"
      ).innerHTML = `<span class="results">Wins: ${score.wins}</span> | <span class="results">Losses: ${score.losses}</span> | <span class="results">Ties: ${score.ties}</span>`;
      // console.log(autoplay);
      if (autoplay) {
        autoplay = false;
        reload = true;
        autoPlay();
      }
      document.querySelector(".inform").innerText = 
        localStorage.getItem("inform");

      headingAnimation(180, 57);
      if (resetting == "true") {
        resetAnimation(0, 2);
        informAnimation(25, 55);
      }
    });

    // static things

    document.querySelector(".autoplay").addEventListener("click", () => {
      document.querySelector(".autoplay").blur();
    });

    document.querySelector(".reset").addEventListener("click", () => {
      document.querySelector(".reset").blur();
    });
  </script>
</body>

</html>
